"use strict";(globalThis["webpackChunkbani_asror_app"]=globalThis["webpackChunkbani_asror_app"]||[]).push([[820],{6820:(e,a,l)=>{l.r(a),l.d(a,{default:()=>R});var n=l(1347),t=l(7763),s=l(8633),o=l(1659),r=l(4187),u=l(3022),i=l(5469),d=l(3803),m=l(7534);const c={class:"q-gutter-x-md"},p={__name:"UserData",async setup(e){let a,l;const p=[{name:"username",align:"left",label:"Username",field:"username",sortable:!0},{name:"nama",label:"Nama",align:"left",field:"nama",sortable:!0},{name:"groups",label:"Group",align:"left",field:"groups",sortable:!1},{name:"email",label:"Email",align:"left",field:"email",sortable:!0}],b=(0,r.Kh)({}),g=(0,r.Kh)([]),_=(0,r.KR)(""),k=(0,r.KR)(!1),f=(0,r.KR)(!1),v=(0,r.KR)(!1),F=(0,r.KR)(!1),h=(0,u.A)();try{const e=([a,l]=(0,n.E)((()=>o.r.get("users"))),a=await a,l(),a);Object.assign(g,e.data.data.users)}catch(Q){console.log("Not Found: users -> users",Q.response)}const A=e=>{Object.assign(b,e),1==b.is_superadmin?k.value=!0:k.value=!1,1==b.is_admin?f.value=!0:f.value=!1,1==b.is_member?v.value=!0:v.value=!1,1==b.is_guest?F.value=!0:F.value=!1},V=async(e,a,l)=>{const n=l?"Tetapkan yang bersangkutan sebagai "+a.toUpperCase()+"?":"Hapus yang bersangkutan dari group "+a.toUpperCase()+"?";h.dialog({title:"Konfirmasi",message:n,cancel:!0,persistent:!1,html:!0}).onOk((async()=>{await y(e,a,l)})).onCancel((()=>{console.log("Aksi digagalkan")}))};async function y(e,a,l){const n=l?"add":"remove",t={user_id:e,method:n,group_name:a};try{const e=await o.r.post("user-group",t);(0,i.VX)(e.data.message)}catch(Q){(0,d.$)(Q.response.data.message).forEach((e=>{(0,i.UG)(e)}))}finally{(0,m.l6)()}}const q=async e=>{h.dialog({title:"Konfirmasi",message:"Update?",cancel:!0,persistent:!1,html:!0}).onOk((async()=>{try{const a=await o.r.put(`users/${e}`,{member_id:b.member_id});(0,i.VX)(a.data.message),(0,m.l6)()}catch(Q){(0,d.$)(Q.response.data.message).forEach((e=>{(0,i.UG)(e)}))}}))},C=async e=>{h.dialog({title:"Konfirmasi",message:"Hapus user ini?",cancel:!0,persistent:!1,html:!0}).onOk((async()=>{try{const a=await o.r.delete(`users/${e}`);(0,i.VX)(a.data.message)}catch(Q){(0,d.$)(Q.response.data.message).forEach((e=>{(0,i.UG)(e)}))}finally{(0,m.l6)()}}))};return(e,a)=>{const l=(0,n.g2)("q-icon"),o=(0,n.g2)("q-input"),r=(0,n.g2)("q-td"),u=(0,n.g2)("q-tr"),i=(0,n.g2)("q-table"),d=(0,n.g2)("q-card-section"),m=(0,n.g2)("q-card"),h=(0,n.g2)("q-item-label"),y=(0,n.g2)("q-item-section"),Q=(0,n.g2)("q-item"),U=(0,n.g2)("q-btn"),w=(0,n.g2)("q-popup-edit"),W=(0,n.g2)("q-toggle"),T=(0,n.g2)("q-list"),K=(0,n.g2)("q-separator"),I=(0,n.g2)("q-card-actions"),S=(0,n.gN)("ripple");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(m,{class:"bg-green-7 text-green-1"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{class:"q-pa-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(i,{title:"Users",rows:g,columns:p,filter:_.value,class:"bg-green-1 text-green-10"},{"top-right":(0,n.k6)((()=>[(0,n.bF)(o,{borderless:"",dense:"",debounce:"300",modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=e=>_.value=e),placeholder:"Cari..."},{append:(0,n.k6)((()=>[(0,n.bF)(l,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,n.k6)((e=>[(0,n.bF)(u,{props:e,onClick:a=>A(e.row)},{default:(0,n.k6)((()=>[(0,n.bF)(r,{key:"username",props:e},{default:(0,n.k6)((()=>[(0,n.eW)((0,t.v_)(e.row.username),1)])),_:2},1032,["props"]),(0,n.bF)(r,{key:"nama",props:e},{default:(0,n.k6)((()=>[(0,n.eW)((0,t.v_)(e.row.nama),1)])),_:2},1032,["props"]),(0,n.bF)(r,{key:"groups",props:e},{default:(0,n.k6)((()=>[(0,n.eW)(" ["+(0,t.v_)(e.row.groups)+"] ",1)])),_:2},1032,["props"]),(0,n.bF)(r,{key:"email",props:e},{default:(0,n.k6)((()=>[(0,n.eW)((0,t.v_)(e.row.email),1)])),_:2},1032,["props"])])),_:2},1032,["props","onClick"])])),_:1},8,["rows","filter"])])),_:1})])),_:1}),b.id?((0,n.uX)(),(0,n.Wv)(m,{key:0,class:"bg-green-1 text-green-10"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{class:"q-pa-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(T,{separator:""},{default:(0,n.k6)((()=>[(0,n.bo)(((0,n.uX)(),(0,n.Wv)(Q,{clickable:""},{default:(0,n.k6)((()=>[(0,n.bF)(y,null,{default:(0,n.k6)((()=>[(0,n.bF)(h,{overline:""},{default:(0,n.k6)((()=>[(0,n.eW)("ID | Username | Email")])),_:1}),(0,n.bF)(h,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,t.v_)(b.id||"")+" | "+(0,t.v_)(b.username||"-")+" | "+(0,t.v_)(b.email||"-"),1)])),_:1})])),_:1})])),_:1})),[[S]]),(0,n.bF)(Q,null,{default:(0,n.k6)((()=>[(0,n.bF)(y,null,{default:(0,n.k6)((()=>[(0,n.bo)(((0,n.uX)(),(0,n.Wv)(Q,{clickable:"",to:b.member_id?"/members/"+b.member_id:null,class:"no-padding"},{default:(0,n.k6)((()=>[(0,n.bF)(y,null,{default:(0,n.k6)((()=>[(0,n.bF)(h,{overline:""},{default:(0,n.k6)((()=>[(0,n.eW)("Nama")])),_:1}),(0,n.bF)(h,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,t.v_)(b.nama?b.nama+" ("+b.lp+")":"-"),1)])),_:1})])),_:1})])),_:1},8,["to"])),[[S]])])),_:1}),(0,n.bF)(y,{side:"",class:"no-padding bg-green-11"},{default:(0,n.k6)((()=>[(0,n.bF)(h,{class:"text-green-10 cursor-pointer q-px-lg"},{default:(0,n.k6)((()=>[(0,n.eW)((0,t.v_)(b.member_id?b.member_id:"?")+" ",1),(0,n.bF)(w,{modelValue:b.member_id,"onUpdate:modelValue":a[3]||(a[3]=e=>b.member_id=e),autofocus:""},{default:(0,n.k6)((e=>[(0,n.bF)(o,{autofocus:"",dense:"",modelValue:b.member_id,"onUpdate:modelValue":a[2]||(a[2]=e=>b.member_id=e),"model-value":b.member_id,hint:"Member ID"},{after:(0,n.k6)((()=>[(0,n.bF)(U,{flat:"",dense:"",color:"negative",icon:"cancel",onClick:(0,s.D$)(e.cancel,["stop","prevent"])},null,8,["onClick"]),(0,n.bF)(U,{flat:"",dense:"",color:"positive",icon:"check_circle",onClick:a[1]||(a[1]=(0,s.D$)((e=>q(b.id)),["stop","prevent"]))})])),_:2},1032,["modelValue","model-value"])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,n.bF)(Q,null,{default:(0,n.k6)((()=>[(0,n.bF)(y,null,{default:(0,n.k6)((()=>[(0,n.bF)(h,{overline:""},{default:(0,n.k6)((()=>[(0,n.eW)("Akses")])),_:1}),(0,n.bF)(h,null,{default:(0,n.k6)((()=>[(0,n.Lk)("div",c,[(0,n.bF)(W,{modelValue:F.value,"onUpdate:modelValue":a[4]||(a[4]=e=>F.value=e),color:"green",label:"Tamu",onClick:a[5]||(a[5]=e=>V(b.id,"guest",F.value)),disable:""},null,8,["modelValue"]),(0,n.bF)(W,{modelValue:v.value,"onUpdate:modelValue":a[6]||(a[6]=e=>v.value=e),color:"green",label:"Anggota",onClick:a[7]||(a[7]=e=>V(b.id,"member",v.value))},null,8,["modelValue"]),(0,n.bF)(W,{modelValue:f.value,"onUpdate:modelValue":a[8]||(a[8]=e=>f.value=e),color:"green",label:"Admin",onClick:a[9]||(a[9]=e=>V(b.id,"admin",f.value))},null,8,["modelValue"]),(0,n.bF)(W,{modelValue:k.value,"onUpdate:modelValue":a[10]||(a[10]=e=>k.value=e),color:"green",label:"Super Admin",onClick:e=>null,disable:""},null,8,["modelValue"])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.bF)(K),(0,n.bF)(I,{align:"right"},{default:(0,n.k6)((()=>[(0,n.bF)(U,{label:"Hapus","no-caps":"",color:"negative",onClick:a[11]||(a[11]=e=>C(b.id))})])),_:1})])),_:1})):(0,n.Q3)("",!0)],64)}}};var b=l(3341),g=l(222),_=l(4432),k=l(6067),f=l(3933),v=l(7339),F=l(8785),h=l(2677),A=l(5725),V=l(3766),y=l(2589),q=l(4958),C=l(9039),Q=l(8186),U=l(6915),w=l(5034),W=l(4028),T=l(272),K=l.n(T);const I=p,S=I;K()(p,"components",{QCard:b.A,QCardSection:g.A,QTable:_.A,QInput:k.A,QIcon:f.A,QTr:v.A,QTd:F.A,QBtn:h.A,QToggle:A.A,QList:V.A,QItem:y.A,QItemSection:q.A,QItemLabel:C.A,QPopupEdit:Q.A,QSeparator:U.A,QCardActions:w.A}),K()(p,"directives",{Ripple:W.A});const E={class:"spinner"},X={__name:"UserIndex",emits:["pageTitle","pageSubTitle","showButtonSearch"],setup(e,{emit:a}){const l=a;return l("pageTitle","Data Pengguna"),l("pageSubTitle",null),l("showButtonSearch",!0),(e,a)=>{const l=(0,n.g2)("q-spinner-cube");return(0,n.uX)(),(0,n.Wv)(n.tY,null,{default:(0,n.k6)((()=>[(0,n.bF)(S)])),fallback:(0,n.k6)((()=>[(0,n.Lk)("div",E,[(0,n.bF)(l,{color:"green-4",size:"8em"})])])),_:1})}}};var x=l(2968),$=l(1402);const D=(0,x.A)(X,[["__scopeId","data-v-e6450906"]]),R=D;K()(X,"components",{QSpinnerCube:$.A})}}]);