"use strict";(globalThis["webpackChunkbani_asror_app"]=globalThis["webpackChunkbani_asror_app"]||[]).push([[820],{6820:(e,a,l)=>{l.r(a),l.d(a,{default:()=>X});var n=l(1347),s=l(7763),o=l(8633),t=l(1659),r=l(4187),u=l(3022),i=l(5469),d=l(3803),m=l(7534);const c={class:"q-gutter-x-md"},p={__name:"UserData",async setup(e){let a,l;const p=[{name:"username",align:"left",label:"Username",field:"username",sortable:!0},{name:"nama",label:"Nama",align:"left",field:"nama",sortable:!0},{name:"groups",label:"Group",align:"left",field:"groups",sortable:!1},{name:"email",label:"Email",align:"left",field:"email",sortable:!0}],b=(0,r.Kh)({}),g=(0,r.Kh)([]),k=(0,r.KR)(""),_=(0,r.KR)(!1),f=(0,r.KR)(!1),v=(0,r.KR)(!1),F=(0,r.KR)(!1),h=(0,u.A)();try{const e=([a,l]=(0,n.E)((()=>t.r.get("users"))),a=await a,l(),a);Object.assign(g,e.data.data.users)}catch(x){console.log("Not Found: users -> users",x.response)}const q=e=>{Object.assign(b,e),1==b.is_superadmin?_.value=!0:_.value=!1,1==b.is_admin?f.value=!0:f.value=!1,1==b.is_member?v.value=!0:v.value=!1,1==b.is_guest?F.value=!0:F.value=!1},V=async(e,a,l)=>{const n=l?"Tetapkan yang bersangkutan sebagai "+a.toUpperCase()+"?":"Hapus yang bersangkutan dari group "+a.toUpperCase()+"?";h.dialog({title:"Konfirmasi",message:n,cancel:!0,persistent:!1,html:!0}).onOk((async()=>{await y(e,a,l)})).onCancel((()=>{console.log("Aksi digagalkan")}))};async function y(e,a,l){const n=l?"add":"remove",s={user_id:e,method:n,group_name:a};try{const e=await t.r.post("user-group",s);(0,i.VX)(e.data.message)}catch(x){(0,d.$)(x.response.data.message).forEach((e=>{(0,i.UG)(e)}))}finally{(0,m.l6)()}}const A=async e=>{h.dialog({title:"Konfirmasi",message:"Update Member ID",cancel:!0,persistent:!1,html:!0}).onOk((async()=>{try{const a=await t.r.put(`users/${e}`,{member_id:b.member_id});(0,i.VX)(a.data.message),(0,m.l6)()}catch(x){(0,d.$)(x.response.data.message).forEach((e=>{(0,i.UG)(e)}))}}))},C=async e=>{h.dialog({title:"Konfirmasi",message:"Update Nomor Telepon (WA)?",cancel:!0,persistent:!1,html:!0}).onOk((async()=>{try{const a=await t.r.put(`users/${e}`,{phone:b.phone});(0,i.VX)(a.data.message),(0,m.l6)()}catch(x){(0,d.$)(x.response.data.message).forEach((e=>{(0,i.UG)(e)}))}}))},U=e=>{window.open(`https://wa.me/${e.replace(/^0/,"62")}`,"_blank")},w=async e=>{h.dialog({title:"Konfirmasi",message:"Hapus user ini?",cancel:!0,persistent:!1,html:!0}).onOk((async()=>{try{const a=await t.r.delete(`users/${e}`);(0,i.VX)(a.data.message)}catch(x){(0,d.$)(x.response.data.message).forEach((e=>{(0,i.UG)(e)}))}finally{(0,m.l6)()}}))};return(e,a)=>{const l=(0,n.g2)("q-icon"),t=(0,n.g2)("q-input"),r=(0,n.g2)("q-td"),u=(0,n.g2)("q-tr"),i=(0,n.g2)("q-table"),d=(0,n.g2)("q-card-section"),m=(0,n.g2)("q-card"),h=(0,n.g2)("q-item-label"),y=(0,n.g2)("q-item-section"),x=(0,n.g2)("q-btn"),Q=(0,n.g2)("q-popup-edit"),T=(0,n.g2)("q-item"),K=(0,n.g2)("q-toggle"),W=(0,n.g2)("q-list"),$=(0,n.g2)("q-separator"),I=(0,n.g2)("q-card-actions");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(m,{class:"bg-green-7 text-green-1"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{class:"q-pa-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(i,{title:"Users",rows:g,columns:p,filter:k.value,class:"bg-green-1 text-green-10"},{"top-right":(0,n.k6)((()=>[(0,n.bF)(t,{borderless:"",dense:"",debounce:"300",modelValue:k.value,"onUpdate:modelValue":a[0]||(a[0]=e=>k.value=e),placeholder:"Cari..."},{append:(0,n.k6)((()=>[(0,n.bF)(l,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,n.k6)((e=>[(0,n.bF)(u,{props:e,onClick:a=>q(e.row)},{default:(0,n.k6)((()=>[(0,n.bF)(r,{key:"username",props:e},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.row.username),1)])),_:2},1032,["props"]),(0,n.bF)(r,{key:"nama",props:e},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.row.nama),1)])),_:2},1032,["props"]),(0,n.bF)(r,{key:"groups",props:e},{default:(0,n.k6)((()=>[(0,n.eW)(" ["+(0,s.v_)(e.row.groups)+"] ",1)])),_:2},1032,["props"]),(0,n.bF)(r,{key:"email",props:e},{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(e.row.email),1)])),_:2},1032,["props"])])),_:2},1032,["props","onClick"])])),_:1},8,["rows","filter"])])),_:1})])),_:1}),b.id?((0,n.uX)(),(0,n.Wv)(m,{key:0,class:"bg-green-1 text-green-10"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{class:"q-pa-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(W,{separator:""},{default:(0,n.k6)((()=>[(0,n.bF)(T,{class:"q-px-none"},{default:(0,n.k6)((()=>[(0,n.bF)(y,null,{default:(0,n.k6)((()=>[(0,n.bF)(h,{overline:""},{default:(0,n.k6)((()=>[(0,n.eW)("ID | Username | Email | Phone")])),_:1}),(0,n.bF)(h,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(b.id||"?")+" | "+(0,s.v_)(b.username||"?")+" | "+(0,s.v_)(b.email||"?")+" | "+(0,s.v_)(b.phone||"?"),1)])),_:1})])),_:1}),(0,n.bF)(y,{side:"",class:"no-padding"},{default:(0,n.k6)((()=>[(0,n.bF)(h,{class:"text-green-10"},{default:(0,n.k6)((()=>[(0,n.bF)(x,{class:"bg-green-11 text-green-10 q-px-sm q-ml-sm",outline:"",glossy:""},{default:(0,n.k6)((()=>[(0,n.bF)(l,{name:"phone",size:"1em"}),(0,n.bF)(l,{name:"edit",size:"1em"}),(0,n.bF)(Q,{modelValue:b.phone,"onUpdate:modelValue":a[3]||(a[3]=e=>b.phone=e),autofocus:""},{default:(0,n.k6)((e=>[(0,n.bF)(t,{autofocus:"",dense:"",modelValue:b.phone,"onUpdate:modelValue":a[2]||(a[2]=e=>b.phone=e),"model-value":b.phone,hint:"User Phone: 628x ..."},{after:(0,n.k6)((()=>[(0,n.bF)(x,{flat:"",dense:"",color:"negative",icon:"cancel",onClick:(0,o.D$)(e.cancel,["stop","prevent"])},null,8,["onClick"]),(0,n.bF)(x,{flat:"",dense:"",color:"positive",icon:"check_circle",onClick:a[1]||(a[1]=(0,o.D$)((e=>C(b.id)),["stop","prevent"]))})])),_:2},1032,["modelValue","model-value"])])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(x,{class:"bg-green-11 text-green-10 q-px-sm q-ml-sm",outline:"",glossy:"",icon:"phone",disable:!b.phone,onClick:a[4]||(a[4]=e=>U(b.phone))},null,8,["disable"])])),_:1})])),_:1})])),_:1}),(0,n.bF)(T,{class:"q-px-none"},{default:(0,n.k6)((()=>[(0,n.bF)(y,null,{default:(0,n.k6)((()=>[(0,n.bF)(T,{class:"no-padding"},{default:(0,n.k6)((()=>[(0,n.bF)(y,null,{default:(0,n.k6)((()=>[(0,n.bF)(h,{overline:""},{default:(0,n.k6)((()=>[(0,n.eW)("Nama")])),_:1}),(0,n.bF)(h,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,s.v_)(b.nama?b.nama+" ("+b.lp+")":"-"),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.bF)(y,{side:"",class:"no-padding"},{default:(0,n.k6)((()=>[(0,n.bF)(h,{class:""},{default:(0,n.k6)((()=>[(0,n.bF)(x,{class:"bg-green-11 text-green-10 q-px-sm q-ml-sm",outline:"",glossy:"",label:b.member_id?b.member_id:"?"},{default:(0,n.k6)((()=>[(0,n.bF)(l,{name:"edit",size:"1em",class:"q-ml-xs"}),(0,n.bF)(Q,{modelValue:b.member_id,"onUpdate:modelValue":a[7]||(a[7]=e=>b.member_id=e),autofocus:""},{default:(0,n.k6)((e=>[(0,n.bF)(t,{autofocus:"",dense:"",modelValue:b.member_id,"onUpdate:modelValue":a[6]||(a[6]=e=>b.member_id=e),"model-value":b.member_id,hint:"Member ID"},{after:(0,n.k6)((()=>[(0,n.bF)(x,{flat:"",dense:"",color:"negative",icon:"cancel",onClick:(0,o.D$)(e.cancel,["stop","prevent"])},null,8,["onClick"]),(0,n.bF)(x,{flat:"",dense:"",color:"positive",icon:"check_circle",onClick:a[5]||(a[5]=(0,o.D$)((e=>A(b.id)),["stop","prevent"]))})])),_:2},1032,["modelValue","model-value"])])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,n.bF)(x,{class:"bg-green-11 text-green-10 q-px-sm q-ml-sm",outline:"",glossy:"",to:b.member_id?"/members/"+b.member_id:null,icon:"person",disable:!b.member_id},null,8,["to","disable"])])),_:1})])),_:1})])),_:1}),(0,n.bF)(T,{class:"q-px-none"},{default:(0,n.k6)((()=>[(0,n.bF)(y,null,{default:(0,n.k6)((()=>[(0,n.bF)(h,{overline:""},{default:(0,n.k6)((()=>[(0,n.eW)("Akses")])),_:1}),(0,n.bF)(h,null,{default:(0,n.k6)((()=>[(0,n.Lk)("div",c,[(0,n.bF)(K,{modelValue:F.value,"onUpdate:modelValue":a[8]||(a[8]=e=>F.value=e),color:"green",label:"Tamu",onClick:a[9]||(a[9]=e=>V(b.id,"guest",F.value)),disable:""},null,8,["modelValue"]),(0,n.bF)(K,{modelValue:v.value,"onUpdate:modelValue":a[10]||(a[10]=e=>v.value=e),color:"green",label:"Anggota",onClick:a[11]||(a[11]=e=>V(b.id,"member",v.value))},null,8,["modelValue"]),(0,n.bF)(K,{modelValue:f.value,"onUpdate:modelValue":a[12]||(a[12]=e=>f.value=e),color:"green",label:"Admin",onClick:a[13]||(a[13]=e=>V(b.id,"admin",f.value))},null,8,["modelValue"]),(0,n.bF)(K,{modelValue:_.value,"onUpdate:modelValue":a[14]||(a[14]=e=>_.value=e),color:"green",label:"Super Admin",onClick:e=>null,disable:""},null,8,["modelValue"])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.bF)($),(0,n.bF)(I,{align:"right"},{default:(0,n.k6)((()=>[(0,n.bF)(x,{label:"Hapus","no-caps":"",color:"negative",onClick:a[15]||(a[15]=e=>w(b.id))})])),_:1})])),_:1})):(0,n.Q3)("",!0)],64)}}};var b=l(3341),g=l(222),k=l(4432),_=l(6067),f=l(3933),v=l(7339),F=l(8785),h=l(2677),q=l(5725),V=l(3766),y=l(2589),A=l(4958),C=l(9039),U=l(8186),w=l(6915),x=l(5034),Q=l(272),T=l.n(Q);const K=p,W=K;T()(p,"components",{QCard:b.A,QCardSection:g.A,QTable:k.A,QInput:_.A,QIcon:f.A,QTr:v.A,QTd:F.A,QBtn:h.A,QToggle:q.A,QList:V.A,QItem:y.A,QItemSection:A.A,QItemLabel:C.A,QPopupEdit:U.A,QSeparator:w.A,QCardActions:x.A});const $={class:"spinner"},I={__name:"UserIndex",emits:["pageTitle","pageSubTitle","showButtonSearch"],setup(e,{emit:a}){const l=a;return l("pageTitle","Data Pengguna"),l("pageSubTitle",null),l("showButtonSearch",!0),(e,a)=>{const l=(0,n.g2)("q-spinner-cube");return(0,n.uX)(),(0,n.Wv)(n.tY,null,{default:(0,n.k6)((()=>[(0,n.bF)(W)])),fallback:(0,n.k6)((()=>[(0,n.Lk)("div",$,[(0,n.bF)(l,{color:"green-4",size:"8em"})])])),_:1})}}};var D=l(2968),E=l(1402);const S=(0,D.A)(I,[["__scopeId","data-v-e6450906"]]),X=S;T()(I,"components",{QSpinnerCube:E.A})}}]);