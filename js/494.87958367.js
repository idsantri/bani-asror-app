"use strict";(globalThis["webpackChunkbani_asror_app"]=globalThis["webpackChunkbani_asror_app"]||[]).push([[494],{5494:(e,a,t)=>{t.r(a),t.d(a,{default:()=>y});t(7590);var l=t(1347),r=t(8633),o=t(3416),s=t(455),n=t(4187),u=t(3803),c=t(4257),d=t(5469);const i={class:"q-pa-xs"},p={class:"q-gutter-y-md column"},g={__name:"LoginPage",emits:["title","errors"],setup(e,{emit:a}){const t=(0,s.rd)(),g=(0,n.KR)(""),m=(0,n.KR)(""),b=(0,n.KR)(!1),h=a;h("title","Login"),h("errors",[]);const k=async()=>{h("errors",[]);try{b.value=!0;const e=await o.F.post("login",{login:g.value,password:m.value}),a=e.data.data.user.member_id;(0,c.A)().token=e.data.data.token,(0,c.A)().user=e.data.data.user,(0,c.A)().groups=e.data.data.groups,o.r.defaults.headers.common["Authorization"]="Bearer "+(0,c.A)().getToken,(0,d.VX)(e.data.message),a?t.push(`/members/${a}`):t.push("/profile")}catch(e){h("errors",(0,u.$)(e.response.data.message))}finally{b.value=!1}};return(0,l.$u)((()=>{const e=document.querySelector("ul > li > span > a");e&&e.addEventListener("click",(async a=>{console.log("anchor clicked"),h("errors",[]),a.preventDefault();const t=e.href.replace("%2540","@");try{b.value=!0;const e=await o.F.get(t),a=(0,d.Wv)(e.data.message,0);await a}catch(l){h("errors",(0,u.$)(l.response.data.message))}finally{b.value=!1}}))})),(e,a)=>{const t=(0,l.g2)("q-input"),o=(0,l.g2)("q-btn"),s=(0,l.g2)("q-card-section"),n=(0,l.g2)("q-card"),u=(0,l.g2)("q-spinner-cube");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",i,[(0,l.Lk)("form",{onSubmit:(0,r.D$)(k,["prevent"])},[(0,l.Lk)("div",p,[(0,l.bF)(t,{"bg-color":"green-1",outlined:"",modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=e=>g.value=e),required:"",label:"Login",placeholder:"Masukkan username atau email Anda!",autocomplete:""},null,8,["modelValue"]),(0,l.bF)(t,{"bg-color":"green-1",outlined:"",modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=e=>m.value=e),type:"password",required:"",label:"Password",placeholder:"Masukkan password!",autocomplete:""},null,8,["modelValue"]),(0,l.bF)(o,{type:"submit",class:"full-width q-pa-sm text-green-10",color:"green-3",label:"Login"}),(0,l.bF)(n,{class:"my-card",flat:""},{default:(0,l.k6)((()=>[(0,l.bF)(s,{class:"text-green-10 text-center bg-green-2 q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(o,{outline:"",color:"green-10",class:"full-width text-weight-regular","no-caps":"",to:"/register",label:"Belum punya akun? Daftar!"}),(0,l.bF)(o,{outline:"",color:"green-10",class:"full-width text-weight-regular q-mt-sm","no-caps":"",to:"/forgot",label:"Lupa password? Atur ulang!"})])),_:1})])),_:1})])],32)]),(0,l.bo)((0,l.bF)(u,{color:"green-12",size:"14em",class:"absolute-center"},null,512),[[r.aG,b.value]])],64)}}};var m=t(6067),b=t(2677),h=t(3341),k=t(222),v=t(1402),f=t(272),w=t.n(f);const q=g,y=q;w()(g,"components",{QInput:m.A,QBtn:b.A,QCard:h.A,QCardSection:k.A,QSpinnerCube:v.A})}}]);