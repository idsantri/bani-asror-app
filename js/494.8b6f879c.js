"use strict";(globalThis["webpackChunkbani_asror_app"]=globalThis["webpackChunkbani_asror_app"]||[]).push([[494],{1131:(e,a,r)=>{r.d(a,{A:()=>c});var t=r(9100),s=r(6159),l=r(5469);const o=s.A.BASE_API,n=t.A.create({baseURL:o});n.defaults.withCredentials=!0;const u=n;u.interceptors.response.use((e=>e),(e=>{if(e.response)return Promise.reject(e);(0,l.UG)("Tidak dapat terhubung ke server")}));const c=u},5494:(e,a,r)=>{r.r(a),r.d(a,{default:()=>y});r(7590);var t=r(1347),s=r(8633),l=r(1131),o=r(1659),n=r(455),u=r(4187),c=r(3803),i=r(4257),d=r(5469);const p={class:"q-pa-xs"},g={class:"q-gutter-y-md column"},m={__name:"LoginPage",emits:["title","errors"],setup(e,{emit:a}){const r=(0,n.rd)(),m=(0,u.KR)(""),b=(0,u.KR)(""),h=(0,u.KR)(!1),k=a;k("title","Login"),k("errors",[]);const v=async()=>{k("errors",[]);try{h.value=!0;const e=await l.A.post("login",{login:m.value,password:b.value}),{data:a}=e.data;(0,i.A)().token=a.token,(0,i.A)().user=a.user,(0,i.A)().groups=a.groups,o.r.defaults.headers.common["Authorization"]="Bearer "+(0,i.A)().getToken,(0,d.VX)(e.data.message);const t=a.user?.member_id;t?r.push(`/members/${t}`):r.push("/profile")}catch(e){k("errors",(0,c.$)(e.response?.data?.message))}finally{h.value=!1}};return(0,t.$u)((()=>{const e=document.querySelector("ul > li > span > a");e&&e.addEventListener("click",(async a=>{console.log("anchor clicked"),k("errors",[]),a.preventDefault();const r=e.href.replace("%2540","@");try{h.value=!0;const e=await l.A.get(r),a=(0,d.Wv)(e.data.message,0);await a}catch(t){k("errors",(0,c.$)(t.response.data.message))}finally{h.value=!1}}))})),(e,a)=>{const r=(0,t.g2)("q-input"),l=(0,t.g2)("q-btn"),o=(0,t.g2)("q-card-section"),n=(0,t.g2)("q-card"),u=(0,t.g2)("q-spinner-cube");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("div",p,[(0,t.Lk)("form",{onSubmit:(0,s.D$)(v,["prevent"])},[(0,t.Lk)("div",g,[(0,t.bF)(r,{"bg-color":"green-1",outlined:"",modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),required:"",label:"Login",placeholder:"Masukkan username atau email Anda!",autocomplete:""},null,8,["modelValue"]),(0,t.bF)(r,{"bg-color":"green-1",outlined:"",modelValue:b.value,"onUpdate:modelValue":a[1]||(a[1]=e=>b.value=e),type:"password",required:"",label:"Password",placeholder:"Masukkan password!",autocomplete:""},null,8,["modelValue"]),(0,t.bF)(l,{type:"submit",class:"full-width q-pa-sm text-green-10",color:"green-3",label:"Login"}),(0,t.bF)(n,{class:"my-card",flat:""},{default:(0,t.k6)((()=>[(0,t.bF)(o,{class:"text-green-10 text-center bg-green-2 q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(l,{outline:"",color:"green-10",class:"full-width text-weight-regular","no-caps":"",to:"/register",label:"Belum punya akun? Daftar!"}),(0,t.bF)(l,{outline:"",color:"green-10",class:"full-width text-weight-regular q-mt-sm","no-caps":"",to:"/forgot",label:"Lupa password? Atur ulang!"})])),_:1})])),_:1})])],32)]),(0,t.bo)((0,t.bF)(u,{color:"green-12",size:"14em",class:"absolute-center"},null,512),[[s.aG,h.value]])],64)}}};var b=r(6067),h=r(2677),k=r(3341),v=r(222),A=r(1402),f=r(272),w=r.n(f);const q=m,y=q;w()(m,"components",{QInput:b.A,QBtn:h.A,QCard:k.A,QCardSection:v.A,QSpinnerCube:A.A})}}]);